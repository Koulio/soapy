<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="switchingBetweenEnv-afterImprovingAPIVersioning" resourceRoot="" soapui-version="4.5.1" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="BOOKS" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint></con:endpoints><con:resource name="v2" path="${#Project#CFG-CONTEXT}"><con:settings/><con:parameters><con:parameter><con:name>env</con:name><con:value>${#Project#CFG-ENV}</con:value><con:style>QUERY</con:style><con:default>${#Project#CFG-ENV}</con:default></con:parameter></con:parameters><con:resource name="books" path=""><con:settings/><con:parameters/><con:resource name="GET" path=""><con:settings/><con:parameters/><con:resource name="getAllBooks" path=""><con:settings/><con:parameters/><con:method name="getAllBooks" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/javascript</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://localhost/books">book:Response</con:element></con:representation><con:request name="getAllBooks-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:resource></con:resource><con:resource name="book" path="/book"><con:settings/><con:parameters/><con:resource name="GET" path=""><con:settings/><con:parameters/><con:resource name="getBookByID" path="/{id}"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="getBookByID" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/javascript</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/book">book:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:book="http://localhost/books/book/">book:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:book="http://localhost/books/book/">book:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="getBookByID-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:resource></con:resource><con:method name="v2-------------------------------v2" method="GET"><con:settings/><con:parameters/></con:method></con:resource><con:resource name="v3" path="${#Project#CFG-CONTEXT}"><con:settings/><con:parameters><con:parameter><con:name>env</con:name><con:value>${#Project#CFG-ENV}</con:value><con:style>QUERY</con:style><con:default>${#Project#CFG-ENV}</con:default></con:parameter></con:parameters><con:resource name="books" path=""><con:settings/><con:parameters/><con:resource name="GET" path=""><con:settings/><con:parameters/><con:resource name="getAllBooks" path=""><con:settings/><con:parameters/><con:method name="getAllBooks" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/javascript</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://localhost/books">book:Response</con:element></con:representation><con:request name="getAllBooks-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:resource></con:resource><con:resource name="book" path="/book"><con:settings/><con:parameters/><con:resource name="GET" path=""><con:settings/><con:parameters/><con:resource name="getBookByID" path="/{id}"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="getBookByID" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/javascript</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/book">book:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:book="http://localhost/books/book/">book:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:book="http://localhost/books/book/">book:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html; charset=iso-8859-1</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="getBookByID-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:resource></con:resource><con:method name="v3-------------------------------v3" method="GET"><con:settings/><con:parameters/></con:method></con:resource></con:interface><con:testSuite name="ENV" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LOAD_DEV" searchProperties="true" disabled="true" id="279c3c36-d253-4178-b3d3-c6a393a3280e"><con:settings/><con:testStep type="groovy" name="load"><con:settings/><con:config><script>import com.yelllabs.soapy.helpers.PropFile;

def filePath = context.expand( '${projectDir}'+File.separator+"cfg"+File.separator+'DEV.cfg' )
def projectHolder = testRunner.testCase.testSuite.getProject()

PropFile p = new PropFile( filePath, projectHolder, log )

p.readAllValues()
p.saveToHolder()</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LOAD_LIVE" searchProperties="true" disabled="true" id="65d96dd4-3115-4c2c-9d5b-858438136def"><con:settings/><con:testStep type="groovy" name="load"><con:settings/><con:config><script>import com.yelllabs.soapy.helpers.PropFile;

def filePath = context.expand( '${projectDir}'+File.separator+"cfg"+File.separator+'LIVE.cfg' )
def projectHolder = testRunner.testCase.testSuite.getProject()

PropFile p = new PropFile( filePath, projectHolder, log )

p.readAllValues()
p.saveToHolder()</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite name="v2"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-JSON" searchProperties="true" id="a7ec6e85-3cca-493d-9ccd-8343db18c6b1"><con:settings/><con:testStep type="restrequest" name="getBookByID-json"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-XML" searchProperties="true" id="7053c669-f0df-48da-a3aa-1d8684d5360a"><con:settings/><con:testStep type="restrequest" name="getBookByID-xml"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBookByID-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBooks-JSON" searchProperties="true" id="ca456136-1ad2-4870-9d36-28fed5e29e7a"><con:settings/><con:testStep type="restrequest" name="getAllBooks-json"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBooks-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBooks-XML" searchProperties="true" id="950727fa-b4db-4e9c-bfe7-332e55ffe889"><con:settings/><con:testStep type="restrequest" name="getAllBooks-xml"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>api-version</con:name><con:value>v2</con:value></con:property></con:properties></con:testSuite><con:testSuite name="v3"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-JSON" searchProperties="true" id="785c262c-a145-403d-8816-35ffba7d9c0f"><con:settings/><con:testStep type="restrequest" name="getBookByID-json"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBookByID-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-XML" searchProperties="true" id="9df82c22-4a88-4642-9e1c-80f6297ae234"><con:settings/><con:testStep type="restrequest" name="getBookByID-xml"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBookByID-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBooks-JSON" searchProperties="true" id="b0a9c14f-aa56-4653-bbe5-3c021dd4ee67"><con:settings/><con:testStep type="restrequest" name="getAllBooks-json"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-json" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+json" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBooks-XML" searchProperties="true" id="d9299069-1053-42ee-ad3b-b50fd56c62bb"><con:settings/><con:testStep type="restrequest" name="getAllBooks-xml"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-xml" mediaType="application/xml" accept=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Accept" value="application/vnd.soapui.books.book-${#TestSuite#api-version}+xml" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-" + context.expand('${#TestSuite#api-version}') + "+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>api-version</con:name><con:value>v3</con:value></con:property></con:properties></con:testSuite><con:mockService port="8088" path="/" host="127.0.0.1" name="DemoBooksMockService" bindToHostOnly="false" docroot="${projectDir}\docroot"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:properties/><con:onRequestScript>import com.yelllabs.soapy.helpers.Ultim8Reponder;

// mockRequest docs:
// http://www.soapui.org/apidocs/com/eviware/soapui/impl/wsdl/mock/WsdlMockRequest.html
if (mockRequest) {
	Ultim8Reponder u8r = new Ultim8Reponder(log, context, mockRequest, mockRunner);
	return u8r.autoMatch();
}</con:onRequestScript></con:mockService><con:properties><con:property><con:name>CFG-ENDPOINT</con:name><con:value>http://localhost:8088</con:value></con:property><con:property><con:name>CFG-CONTEXT</con:name><con:value>books</con:value></con:property><con:property><con:name>CFG-ENV</con:name><con:value>DEV</con:value></con:property></con:properties><con:wssContainer/></con:soapui-project>
