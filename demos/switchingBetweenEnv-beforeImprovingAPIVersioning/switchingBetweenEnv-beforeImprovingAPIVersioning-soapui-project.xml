<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="switchingBetweenEnv-beforeImprovingAPIVersioning" resourceRoot="" soapui-version="4.5.1" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" wadlVersion="http://wadl.dev.java.net/2009/02" name="BOOKS" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint></con:endpoints><con:resource name="v2" path="${#Project#CFG-CONTEXT}"><con:settings/><con:parameters><con:parameter><con:name>env</con:name><con:value>${#Project#CFG-ENV}</con:value><con:style>QUERY</con:style><con:default>${#Project#CFG-ENV}</con:default></con:parameter></con:parameters><con:resource name="books" path=""><con:settings/><con:parameters/><con:resource name="GET" path=""><con:settings/><con:parameters/><con:resource name="getAllBooks" path=""><con:settings/><con:parameters/><con:method name="getAllBooks" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/javascript</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://localhost/books">book:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="https://localhost/books">book:Response</con:element></con:representation><con:request name="getAllBooks" mediaType="application/xml" accept="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-xml" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-xml-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request><con:request name="getAllBooks-xml-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:resource></con:resource><con:resource name="book" path="/book"><con:settings/><con:parameters/><con:resource name="GET" path=""><con:settings/><con:parameters/><con:resource name="getBookByID" path="/{id}"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="getBookByID" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>text/javascript</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:book="http://localhost/book">book:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:book="http://localhost/books/book/">book:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+json</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="http://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:book="http://localhost/books/book/">book:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v2+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/vnd.soapui.books.book-v3+xml</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:ns="https://localhost/books/book/2">ns:Response</con:element></con:representation><con:request name="getBookByID" mediaType="application/xml" accept="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-xml" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-xml-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request><con:request name="getBookByID-xml-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource></con:resource></con:resource></con:resource></con:interface><con:testSuite name="ENV" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LOAD_DEV" searchProperties="true" disabled="true" id="279c3c36-d253-4178-b3d3-c6a393a3280e"><con:settings/><con:testStep type="groovy" name="load"><con:settings/><con:config><script>import com.yelllabs.soapy.helpers.PropFile;

def filePath = context.expand( '${projectDir}'+File.separator+"cfg"+File.separator+'DEV.cfg' )
def projectHolder = testRunner.testCase.testSuite.getProject()

PropFile p = new PropFile( filePath, projectHolder, log )

p.readAllValues()
p.saveToHolder()</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="LOAD_LIVE" searchProperties="true" disabled="true" id="65d96dd4-3115-4c2c-9d5b-858438136def"><con:settings/><con:testStep type="groovy" name="load"><con:settings/><con:config><script>import com.yelllabs.soapy.helpers.PropFile;

def filePath = context.expand( '${projectDir}'+File.separator+"cfg"+File.separator+'LIVE.cfg' )
def projectHolder = testRunner.testCase.testSuite.getProject()

PropFile p = new PropFile( filePath, projectHolder, log )

p.readAllValues()
p.saveToHolder()</script></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:testSuite name="ApiVersioning"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-JSON-defaultVersion" searchProperties="true" id="b41477e7-6ce6-458c-a925-9d1461beeb85"><con:settings/><con:testStep type="restrequest" name="getBookByID-JSON-defaultVersion"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDealByID-json-defaultVersion" mediaType="application/xml" accept="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-JSON-v2" searchProperties="true" id="eb4c0053-3f68-407a-9a3c-5f75588e043f"><con:settings/><con:testStep type="restrequest" name="getBookByID-JSON-v2"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDealByID-json-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v2+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-JSON-v3" searchProperties="true" id="be7b4e96-d776-408c-9055-fc9a388d80f8"><con:settings/><con:testStep type="restrequest" name="getBookByID-JSON-v3"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getDealByID-json-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v3+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-XML-defaultVersion" searchProperties="true" id="4543135a-1599-4022-ac16-c2668464e4c6"><con:settings/><con:testStep type="restrequest" name="getBookByID-XML-defaultVersion"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBookByID-XML-defaultVersion" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-XML-v2" searchProperties="true" id="556e5a10-2c28-4867-aa1c-3732227d6208"><con:settings/><con:testStep type="restrequest" name="getBookByID-XML-v2"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBookByID-XML-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>checkAPIVersion</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getBookByID-XML-v3" searchProperties="true" id="c1c2baa3-5abe-4622-b00c-79680098a830"><con:settings/><con:testStep type="restrequest" name="getBookByID-XML-v3"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getBookByID-XML-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v3+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getAllBooks-JSON-defaultVersion" searchProperties="true" id="268027c6-6fa3-48e2-b642-b5b7e9e801fb"><con:settings/><con:testStep type="restrequest" name="getAllBooks-JSON-defaultVersion"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllDeals-defaultVersion" mediaType="application/xml" accept="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getAllBooks-JSON-v2" searchProperties="true" id="ab0f35b9-f97b-48fa-9117-9cc47b4e6b9f"><con:settings/><con:testStep type="restrequest" name="getAllBooks-JSON-v2"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllDeals-JSON-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v2+json";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getAllBooks-JSON-v3" searchProperties="true" id="174fcff9-55e8-4461-8cf5-30a5469c77d5"><con:settings/><con:testStep type="restrequest" name="getAllBooks-JSON-v3"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-JSON-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="Script Assertion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v3+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getAllBooks-XML-defaultVersion" searchProperties="true" id="a79a61ef-2d4c-44cd-b54b-09581ecdf0ab"><con:settings/><con:testStep type="restrequest" name="getAllBooks-XML-defaultVersion"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-XML-defaultVersion" mediaType="application/xml" accept="application/xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getAllBooks-XML-v2" searchProperties="true" id="092f5e38-7bb1-40c7-a56a-50096557f086"><con:settings/><con:testStep type="restrequest" name="getAllBooks-XML-v2"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}/book/{id}" methodName="getBookByID" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-XML-v2" mediaType="application/xml" accept="application/vnd.soapui.books.book-v2+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v2+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="2" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="getAllBooks-XML-v3" searchProperties="true" id="2fb3b201-8acc-4272-b426-897162e59c06"><con:settings/><con:testStep type="restrequest" name="getAllBooks-XML-v3"><con:settings/><con:config service="BOOKS" resourcePath="/${#Project#CFG-CONTEXT}" methodName="getAllBooks" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAllBooks-XML-v3" mediaType="application/xml" accept="application/vnd.soapui.books.book-v3+xml"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>${#Project#CFG-ENDPOINT}</con:endpoint><con:request/><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" name="checkAPIVersion"><con:configuration><scriptText>String actual = messageExchange.responseHeaders["Content-Type"].getAt(0).toString()
String expected = "application/vnd.soapui.books.book-v3+xml";
assert actual.equals( expected ), "Actual Content-Type: '" + actual + "' does not match expected: '" + expected + "'";</scriptText></con:configuration></con:assertion><con:credentials><con:authType>Global HTTP Settings</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:mockService port="8088" path="/" host="127.0.0.1" name="DemoBooksMockService" bindToHostOnly="false" docroot="${projectDir}\docroot"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.mock.WsdlMockService@require-soap-action">false</con:setting></con:settings><con:properties/><con:onRequestScript>import com.yelllabs.soapy.helpers.Ultim8Reponder;

// mockRequest docs:
// http://www.soapui.org/apidocs/com/eviware/soapui/impl/wsdl/mock/WsdlMockRequest.html
if (mockRequest) {
	Ultim8Reponder u8r = new Ultim8Reponder(log, context, mockRequest, mockRunner);
	return u8r.autoMatch();
}</con:onRequestScript></con:mockService><con:properties><con:property><con:name>CFG-ENDPOINT</con:name><con:value>http://localhost:8088</con:value></con:property><con:property><con:name>CFG-CONTEXT</con:name><con:value>books</con:value></con:property><con:property><con:name>CFG-ENV</con:name><con:value>DEV</con:value></con:property></con:properties><con:wssContainer/></con:soapui-project>
